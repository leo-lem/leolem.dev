---
import { BaseLayout } from "../layout";
import { getStations, AboutMe } from "../content";
import { SeeMore, Embed, Thumbnail } from "../components";

const stations = await getStations();
const albumID = import.meta.env.FAVORITE_ALBUM;
const tripID = import.meta.env.CURRENT_TRIP;
---

<BaseLayout title="About me" showHeader={false}>
  <section class="container-wide stack sm:text-left items-center">
    <Thumbnail src="about" alt="My title image" loading="eager" />

    <div class="stack-sm text-center">
      <p class="summary">Hey there!</p>
      <h1 class="title-lg">I'm Leo.</h1>
    </div>

    <div class="container prose dark:prose-invert text-justify">
      <AboutMe />
    </div>

    <div class="stack-sm text-center">
      <p class="summary">Feel free to reach out via</p>
      <a href="mailto:hey@leolem.dev" class="link-muted"> hey@leolem.dev </a>
    </div>
  </section>

  <section id="skills" class="container-narrow stack">
    <SeeMore href="/explore/">Explore Everything I Do</SeeMore>
  </section>

  <section class="container-wide stack text-center">
    <h2 class="title-lg">What I Enjoy</h2>

    <div class="split">
      <Embed kind="music" albumID={albumID} loading="eager" />
      {tripID && <Embed kind="polarsteps" tripID={tripID} loading="eager" />}
    </div>
  </section>

  <section class="container stack">
    <h2 class="title-lg text-center">My Journey</h2>

    <div class="relative stack">
      <div class="absolute h-full border sm:left-1/2 sm:-translate-x-1/2"></div>

      {
        stations.map(
          ({ data: { title, place, date, duration }, body }, index) => (
            <div
              class={`relative ml-5 sm:ml-0 ${index !== 0 ? "sm:-mt-20" : ""}`}
            >
              <div
                class={`absolute -ml-5 top-3 w-3 border sm:ml-0 sm:left-1/2 sm:top-1/2 ${index % 2 !== 0 ? "sm:-translate-x-full" : ""}`}
              />

              <div
                class={`sm:w-1/2 sm:px-5 ${index % 2 === 0 ? "sm:ml-auto sm:text-left" : "sm:mr-auto sm:text-right"}`}
              >
                <h3 class="m-0">{title}</h3>

                <div class="font-semibold mb-4">
                  <span class="text-secondary text-sm">@ {place} |</span>
                  <span class="meta line-clamp-0">
                    {date.getFullYear()} - {duration}
                  </span>
                </div>

                <article
                  class="summary line-clamp-none prose prose-sm dark:prose-invert"
                  set:html={body}
                />
              </div>
            </div>
          )
        )
      }
    </div>
  </section>
</BaseLayout>
